<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><script defer language=javascript type=text/javascript src=/js/bundle.min.e6020bda5c7287f924bb8f12d78a905d5d6308768ca8fec522a23b043779099f.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><title itemprop=name>Go Sang - Implementing Entity Framework Core 6 With ASP.NET Core 6</title>
<meta property="og:title" content="Go Sang - Implementing Entity Framework Core 6 With ASP.NET Core 6"><meta name=twitter:title content="Go Sang - Implementing Entity Framework Core 6 With ASP.NET Core 6"><meta itemprop=name content="Go Sang - Implementing Entity Framework Core 6 With ASP.NET Core 6"><meta name=application-name content="Go Sang - Implementing Entity Framework Core 6 With ASP.NET Core 6"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><base href=https://gosang.github.io/posts/datastore/implementing-entity-framework-core-6-with-asp.net-core-6/><link rel=canonical href=https://gosang.github.io/posts/datastore/implementing-entity-framework-core-6-with-asp.net-core-6/ itemprop=url><meta name=url content="https://gosang.github.io/posts/datastore/implementing-entity-framework-core-6-with-asp.net-core-6/"><meta name=twitter:url content="https://gosang.github.io/posts/datastore/implementing-entity-framework-core-6-with-asp.net-core-6/"><meta property="og:url" content="https://gosang.github.io/posts/datastore/implementing-entity-framework-core-6-with-asp.net-core-6/"><meta property="og:updated_time" content="20001-20-11T150:54:24Z"><link rel=sitemap type=application/xml title=Sitemap href=https://gosang.github.io/sitemap.xml><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><meta name=twitter:site content><meta name=twitter:creator content><meta property="fb:admins" content><meta name=apple-mobile-web-app-title content><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta property="og:type" content="article"><meta property="article:publisher" content><meta property="og:article:published_time" content="20001-20-11T150:54:24Z"><meta property="article:published_time" content="20001-20-11T150:54:24Z"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Implementing Entity Framework Core 6 With ASP.NET Core 6","author":{"@type":"Person","name":"https:\/\/github.com\/gosang"},"datePublished":"2024-01-20","description":"","wordCount":"1125","mainEntityOfPage":"True","dateModified":"2024-01-20","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"","logo":{"@type":"imageObject","url":""}}}</script><meta name=generator content="Hugo 0.122.0"><link type=text/css rel=stylesheet href=/css/bundle.min.178e339ccb9acabffeebf9adbb0bb23c1ec0b72a2a50edee18a5007d4d5a68aa.css><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5a5a5a;--link-color:#268bd2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#bf616a;--code-background-color:#E5E5E5;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#eee;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9d9d9d;--link-color:#268bd2;--date-color:#9a9a9a;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#ff7f7f;--code-background-color:#393D47}body{background-color:var(--bkg-color)}</style></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://gosang.github.io/><h1>Go Sang</h1></a></h1><p class=lead>Learning about technology.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/posts/>Posts</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=https://gosang.github.io/posts/dotnet/securing-asp-dotnet-core-web-api-with-oauth-2.0-in-microsoft-entra-id/>Securing ASP.NET Core Web API With OAuth 2.0 in Microsoft Entra ID</a></li><li class=bullet><a href=https://gosang.github.io/posts/datastore/optimistic-concurrency-with-etag-in-asp-dotnet-core-8/>Optimistic Concurrency With Etag in ASP.NET Core 8</a></li><li class=bullet><a href=https://gosang.github.io/posts/datastore/implementing-dapper-with-asp-dotnet-core-6/>Implementing Dapper With ASP.Core 6</a></li><li class=bullet><a href=https://gosang.github.io/posts/datastore/implementing-entity-framework-core-6-with-asp.net-core-6/>Implementing Entity Framework Core 6 With ASP.NET Core 6</a></li><li class=bullet><a href=https://gosang.github.io/posts/react/securing-nextjs-applications-with-next-auth-and-mongodb/>Securing Next.js 13 Applications With Next-Auth and MongoDB</a></li></ul></nav><a target=_blank class=social title=GitHub href=https://github.com/gosang><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg>
</a><a target=_blank class=social title="RSS Feed" href=https://gosang.github.io//posts/index.xml><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote>powered by <a target=_blank href=https://gohugo.io>Hugo</a> | themed with <a target=_blank href=https://github.com/lukeorth/poison>poison</a><br>&copy; 2024 . All rights reserved.</p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://gosang.github.io/posts/datastore/implementing-entity-framework-core-6-with-asp.net-core-6/>Implementing Entity Framework Core 6 With ASP.NET Core 6</a></h1><time datetime=2024-01-20T11:50:54Z class=post-date>January 20, 2024</time><ul class=tags><li class="tag-Entity Framework Core"><a href=https://gosang.github.io/tags/entity-framework-core>Entity Framework Core</a></li><li class="tag-ASP.NET Core"><a href=https://gosang.github.io/tags/asp.net-core>ASP.NET Core</a></li></ul><p class=seriesname>Series: <a href=https://gosang.github.io/series/data-store>Data Store</a></p></div><h1 id=introduction>Introduction</h1><p>Entity Framework (EF) Core 6, coupled with ASP.NET Core 6, brings robust data access capabilities to the table, making it a preferred choice for building scalable and modular applications. In this blog post, we will explore the integration of EF Core 6 into an e-commerce system using .NET Core services and APIs.</p><h1 id=what-is-ef-core-6-in-aspnet-core-6>What is EF Core 6 in ASP.NET Core 6?</h1><p>Entity Framework Core 6 is an Object-Relational Mapping (ORM) framework that simplifies database access in .NET applications. In the context of ASP.NET Core 6, EF Core serves as the bridge between your application and the underlying database, providing a convenient way to interact with the data layer.</p><h2 id=why-ef-core-6-and-problem-resolution>Why EF Core 6 and Problem Resolution</h2><p>The integration of EF Core 6 with ASP.NET Core 6 addresses several critical issues in modern application development. It streamlines data access code, reduces boilerplate, and allows developers to focus on business logic rather than intricate SQL queries. The use of EF Core 6 promotes maintainability, testability, and overall productivity.</p><h2 id=microservices-and-modular-monolithic-considerations>Microservices and Modular Monolithic Considerations</h2><p>In the realm of microservices or modular monolithic architectures, EF Core 6 offers flexibility. It can be used in individual microservices, each managing its own database, or as part of a modular monolith, where multiple services share a common database. The choice depends on the specific requirements and design principles of the application.</p><h1 id=implementation-in-an-e-commerce-system>Implementation in an E-commerce System</h1><p>Let&rsquo;s dive into the practical implementation of EF Core 6 in an e-commerce system built with .NET Core services and APIs. The following snippets showcase key aspects such as repository and unit of work patterns, AutoMapper for object mapping, in-memory database usage, and unit testing with Testcontainers and xUnit.</p><h2 id=project-structure>Project Structure</h2><p>Before diving into the code, let&rsquo;s outline the project structure. A typical e-commerce system might have the following structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ECommerceSystem
</span></span><span style=display:flex><span>|-- ECommerce.API
</span></span><span style=display:flex><span>|   |-- Controllers
</span></span><span style=display:flex><span>|   |-- Services
</span></span><span style=display:flex><span>|   |-- Models
</span></span><span style=display:flex><span>|-- ECommerce.Data
</span></span><span style=display:flex><span>|   |-- Entities
</span></span><span style=display:flex><span>|   |-- Repositories
</span></span><span style=display:flex><span>|   |-- UnitOfWork
</span></span><span style=display:flex><span>|-- ECommerce.Tests
</span></span><span style=display:flex><span>|   |-- UnitTests
</span></span><span style=display:flex><span>|   |-- IntegrationTests
</span></span><span style=display:flex><span>|-- AutoMapperProfiles
</span></span><span style=display:flex><span>|-- ECommerce.sln
</span></span></code></pre></div><ul><li>ECommerce.API: Contains the API controllers and services responsible for handling HTTP requests and responses.</li><li>ECommerce.Data: Houses the data layer, including entities, repositories, and the unit of work.</li><li>ECommerce.Tests: Holds unit and integration tests for the application.</li><li>AutoMapperProfiles: Stores AutoMapper profiles for object mapping configurations.</li></ul><h2 id=net-core-api-for-product-endpoint>.Net Core API for Product Endpoint</h2><p>Let&rsquo;s create a simple .NET Core API for managing products in the ECommerce.API project.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// ECommerce.API/Controllers/ProductController.cs</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>[ApiController]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>[Route(&#34;api/products&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductController</span> : ControllerBase
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> IProductService _productService;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ProductController(IProductService productService)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _productService = productService;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>    [HttpGet]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> IActionResult GetProducts()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> products = _productService.GetAllProducts();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Ok(products);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>    [HttpPost]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> IActionResult AddProduct([FromBody] ProductDto productDto)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> addedProduct = _productService.AddProduct(productDto);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> CreatedAtAction(nameof(GetProducts), <span style=color:#66d9ef>new</span> { id = addedProduct.Id }, addedProduct);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=repository-and-unit-of-work-pattern>Repository and Unit of Work Pattern</h2><p>Let&rsquo;s implement the repository and unit of work pattern for managing products in the ECommerce.Data project.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// ECommerce.Data/Repositories/ProductRepository.cs</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductRepository</span> : IRepository&lt;Product&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> DbContext _context;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ProductRepository(DbContext context)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _context = context;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> IEnumerable&lt;Product&gt; GetAll()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> _context.Set&lt;Product&gt;().ToList();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Implement other CRUD operations here</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ECommerce.Data/UnitOfWork/UnitOfWork.cs</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UnitOfWork</span> : IUnitOfWork
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> DbContext _context;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> UnitOfWork(DbContext context)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _context = context;
</span></span><span style=display:flex><span>        Products = <span style=color:#66d9ef>new</span> ProductRepository(_context);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> IRepository&lt;Product&gt; Products { <span style=color:#66d9ef>get</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Complete()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> _context.SaveChanges();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=automapper-for-object-mapping>AutoMapper for Object Mapping</h2><p>Configure AutoMapper to handle the mapping between entities and DTOs in the AutoMapperProfiles project.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// AutoMapperProfiles/MappingProfile.cs</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MappingProfile</span> : Profile
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> MappingProfile()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        CreateMap&lt;Product, ProductDto&gt;();
</span></span><span style=display:flex><span>        CreateMap&lt;ProductDto, Product&gt;();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Additional mappings can be defined here</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// In Startup.cs</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> ConfigureServices(IServiceCollection services)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    services.AddAutoMapper(<span style=color:#66d9ef>typeof</span>(MappingProfile));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ef-core-6-in-memory-repository>EF Core 6 In-Memory Repository</h2><p>Let&rsquo;s set up EF Core 6 with an in-memory repository for testing purposes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#75715e>// ECommerce.Tests/DatabaseFixture.cs</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DatabaseFixture</span> : IDisposable
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DbContextOptions&lt;AppDbContext&gt; DbContextOptions { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> DatabaseFixture()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Set up in-memory database options</span>
</span></span><span style=display:flex><span>        DbContextOptions = <span style=color:#66d9ef>new</span> DbContextOptionsBuilder&lt;AppDbContext&gt;()
</span></span><span style=display:flex><span>            .UseInMemoryDatabase(<span style=color:#e6db74>&#34;TestDatabase&#34;</span>)
</span></span><span style=display:flex><span>            .Options;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Dispose()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Clean up resources</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ECommerce.Tests/IntegrationTests/ProductServiceTests.cs</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>[Collection(&#34;Database collection&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductServiceTests</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> DatabaseFixture _fixture;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ProductServiceTests(DatabaseFixture fixture)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _fixture = fixture;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span><span style=color:#a6e22e>
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>    [Fact]</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> CanAddProduct()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>using</span> (<span style=color:#66d9ef>var</span> context = <span style=color:#66d9ef>new</span> AppDbContext(_fixture.DbContextOptions))
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Initialize repository, unit of work, and service</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> repository = <span style=color:#66d9ef>new</span> ProductRepository(context);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> unitOfWork = <span style=color:#66d9ef>new</span> UnitOfWork(context);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> productService = <span style=color:#66d9ef>new</span> ProductService(repository, unitOfWork);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Test logic for adding a product</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This structure sets the foundation for a scalable and modular e-commerce system, utilizing EF Core 6, ASP.NET Core 6, and additional testing tools for robust development and maintenance.</p><p><strong>Note</strong>: The code snippets provided are simplified examples. In a production environment, additional considerations and error handling should be implemented.</p><h1 id=advantages-and-disadvantages>Advantages and Disadvantages</h1><h2 id=advantages>Advantages</h2><ul><li><strong>Productivity</strong>: EF Core 6 reduces the amount of boilerplate code, allowing developers to focus on application logic.</li><li><strong>Cross-Platform Support</strong>: ASP.NET Core and EF Core are cross-platform, enabling deployment on various operating systems.</li><li><strong>Testability</strong>: In-memory database support facilitates unit testing without touching the actual database.</li></ul><h2 id=disadvantages>Disadvantages</h2><ul><li><strong>Performance Concerns</strong>: While EF Core has improved, micro-optimizations may require using raw SQL or stored procedures in specific scenarios.</li><li><strong>Learning Curve</strong>: Developers new to EF Core may face a learning curve, especially when dealing with advanced features.</li></ul><h1 id=issues-and-considerations>Issues and Considerations</h1><h2 id=issues>Issues</h2><ul><li><strong>Performance Overhead</strong>: EF Core introduces some performance overhead compared to raw SQL queries.</li><li><strong>Automatic Query Generation</strong>: Automatic query generation might lead to inefficient SQL in complex scenarios.</li></ul><h2 id=considerations>Considerations</h2><ul><li><strong>Database Complexity</strong>: For complex queries or specific optimizations, consider using raw SQL or stored procedures.</li><li><strong>Caching Strategies</strong>: Implement appropriate caching strategies to mitigate performance concerns.</li></ul><h1 id=when-to-use-ef-core-6-with-aspnet-core-6>When to Use EF Core 6 with ASP.NET Core 6</h1><ul><li><strong>Rapid Development</strong>: Choose EF Core for rapid development scenarios where speed is crucial.</li><li><strong>Standard CRUD Operations</strong>: Ideal for applications heavily reliant on standard CRUD operations.</li></ul><h1 id=when-not-to-use-ef-core-6-with-aspnet-core-6>When Not to Use EF Core 6 with ASP.NET Core 6</h1><ul><li><strong>Performance-Critical Applications</strong>: In scenarios where absolute performance is critical, consider raw SQL or other lightweight ORMs.</li><li><strong>Legacy Database Systems</strong>: If dealing with legacy databases with unconventional schemas, manual queries may be more suitable.</li></ul><h1 id=best-practices>Best Practices</h1><ul><li><strong>Use Code-First Migrations</strong>: Leverage EF Core&rsquo;s Code-First Migrations for database schema management.</li><li><strong>Optimize Queries</strong>: Regularly review and optimize generated queries for performance.</li><li><strong>Logging and Monitoring</strong>: Implement logging and monitoring to identify and address performance bottlenecks.</li></ul><h1 id=conclusion>Conclusion</h1><p>Entity Framework Core 6, when integrated with ASP.NET Core 6, offers a powerful and efficient way to handle data access in modern applications. While it brings numerous advantages in terms of productivity and maintainability, developers must carefully consider performance implications and make informed decisions based on the specific requirements of their applications. By following best practices and considering the outlined recommendations, developers can harness the full potential of EF Core 6 in their ASP.NET Core 6 projects.</p><h1 id=references>References:</h1><ul><li><a href=https://learn.microsoft.com/en-us/ef/core/ target=_blank>Entity Framework Core Documentation</a></li><li><a href=https://learn.microsoft.com/en-us/aspnet/core/ target=_blank>ASP.NET Core Documentation</a></li><li><a href=https://docs.automapper.org/en/stable/ target=_blank>AutoMapper Documentation</a></li><li><a href=https://xunit.net/ target=_blank>xUnit Documentation</a></li></ul><hr><div class=footer><p>This is a post in the <b><a href=https://gosang.github.io/series/data-store>Data Store</a></b> series.<br>Other posts in this series:<ul class=series><li>January 27, 2024 -
<a href=/posts/datastore/optimistic-concurrency-with-etag-in-asp-dotnet-core-8/>Optimistic Concurrency With Etag in ASP.NET Core 8</a></li><li>January 21, 2024 -
<a href=/posts/datastore/implementing-dapper-with-asp-dotnet-core-6/>Implementing Dapper With ASP.Core 6</a></li><li>January 20, 2024 -
Implementing Entity Framework Core 6 With ASP.NET Core 6</li><li>January 13, 2024 -
<a href=/posts/datastore/implementing-ttl-feature-in-mongodb-atlas-with-dotnet-core/>Implementing TTL (Time To Live) Feature in Mongodb Atlas With Dotnet Core</a></li><li>June 27, 2022 -
<a href=/posts/datastore/implementing-mongodb-atlas-with-dotnet-core-using-cqrs/>Implementing Mongodb Atlas With ASP.NET Core Using CQRS</a></li><li>March 27, 2022 -
<a href=/posts/datastore/mongodb-atlas-with-dotnet-core/>Mongodb Atlas With .NET Core</a></li></ul></p></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#why-ef-core-6-and-problem-resolution>Why EF Core 6 and Problem Resolution</a></li><li><a href=#microservices-and-modular-monolithic-considerations>Microservices and Modular Monolithic Considerations</a></li></ul><ul><li><a href=#project-structure>Project Structure</a></li><li><a href=#net-core-api-for-product-endpoint>.Net Core API for Product Endpoint</a></li><li><a href=#repository-and-unit-of-work-pattern>Repository and Unit of Work Pattern</a></li><li><a href=#automapper-for-object-mapping>AutoMapper for Object Mapping</a></li><li><a href=#ef-core-6-in-memory-repository>EF Core 6 In-Memory Repository</a></li></ul><ul><li><a href=#advantages>Advantages</a></li><li><a href=#disadvantages>Disadvantages</a></li></ul><ul><li><a href=#issues>Issues</a></li><li><a href=#considerations>Considerations</a></li></ul></nav></div></div></div></body></html>