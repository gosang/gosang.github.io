<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><script defer language=javascript type=text/javascript src=/js/bundle.min.11d62625e7495f8147fccf5d08f37bded574a50c4508c235cc666848567d99ab.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><title itemprop=name>Go Sang - Repository Pattern</title><meta property="og:title" content="Go Sang - Repository Pattern"><meta name=twitter:title content="Go Sang - Repository Pattern"><meta itemprop=name content="Go Sang - Repository Pattern"><meta name=application-name content="Go Sang - Repository Pattern"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><base href=https://gosang.github.io/posts/design-patterns/repository-pattern/><link rel=canonical href=https://gosang.github.io/posts/design-patterns/repository-pattern/ itemprop=url><meta name=url content="https://gosang.github.io/posts/design-patterns/repository-pattern/"><meta name=twitter:url content="https://gosang.github.io/posts/design-patterns/repository-pattern/"><meta property="og:url" content="https://gosang.github.io/posts/design-patterns/repository-pattern/"><meta property="og:updated_time" content="29001-29-08T143:48:22Z"><link rel=sitemap type=application/xml title=Sitemap href=https://gosang.github.io/sitemap.xml><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><meta name=twitter:site content><meta name=twitter:creator content><meta property="fb:admins" content><meta name=apple-mobile-web-app-title content><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta property="og:type" content="article"><meta property="article:publisher" content><meta property="og:article:published_time" content="29001-29-08T143:48:22Z"><meta property="article:published_time" content="29001-29-08T143:48:22Z"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Repository Pattern","author":{"@type":"Person","name":"https:\/\/github.com\/gosang"},"datePublished":"2022-01-29","description":"","wordCount":"780","mainEntityOfPage":"True","dateModified":"2022-01-29","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"","logo":{"@type":"imageObject","url":""}}}</script><meta name=generator content="Hugo 0.119.0"><link type=text/css rel=stylesheet href=/css/bundle.min.178e339ccb9acabffeebf9adbb0bb23c1ec0b72a2a50edee18a5007d4d5a68aa.css><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5a5a5a;--link-color:#268bd2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#bf616a;--code-background-color:#E5E5E5;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#eee;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9d9d9d;--link-color:#268bd2;--date-color:#9a9a9a;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#ff7f7f;--code-background-color:#393D47}body{background-color:var(--bkg-color)}</style></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://gosang.github.io/><h1>Go Sang</h1></a></h1><p class=lead>Learning about technology.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/posts/>Posts</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=https://gosang.github.io/posts/caching/implementing-distributed-caching-in-asp-dotnet-core-with-redis/>Implementing Distributed Caching in ASP.NET Core with Redis</a></li><li class=bullet><a href=https://gosang.github.io/posts/ai/implementing-model-context-protocol-for-large-language-models/>Implementing Model Context Protocol for Large Language Models</a></li><li class=bullet><a href=https://gosang.github.io/posts/ai/retrieval-augmented-generation-architecture-patterns/>Retrieval Augmented Generation Architecture Patterns</a></li><li class=bullet><a href=https://gosang.github.io/posts/dotnet/implementing-range-based-pagination-with-mongodb-csharp-driver-in-asp-dotnet-core/>Implementing Range-Based Pagination with MongoDB C# Driver in ASP.NET Core 8</a></li><li class=bullet><a href=https://gosang.github.io/posts/dotnet/implementing-pagination-with-mongodb-csharp-driver-in-asp-dotnet-core/>Implementing Pagination with MongoDB C# Driver in ASP.NET Core 8</a></li></ul></nav><a target=_blank class=social title=GitHub href=https://github.com/gosang><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a target=_blank class=social title="RSS Feed" href=https://gosang.github.io//posts/index.xml><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote>powered by <a target=_blank href=https://gohugo.io>Hugo</a> | themed with <a target=_blank href=https://github.com/lukeorth/poison>poison</a><br>&copy; 2025 . All rights reserved.</p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://gosang.github.io/posts/design-patterns/repository-pattern/>Repository Pattern</a></h1><time datetime=2022-01-29T08:43:48Z class=post-date>January 29, 2022</time><ul class=tags><li class=tag-Repository><a href=https://gosang.github.io/tags/repository>Repository</a></li><li class="tag-Unit of Work"><a href=https://gosang.github.io/tags/unit-of-work>Unit of Work</a></li></ul><p class=seriesname>Series: <a href=https://gosang.github.io/series/design-patterns>Design Patterns</a></p></div><p>In the realm of software development, maintaining a clean, organized, and efficient codebase is paramount. One of the key design patterns that facilitates this is the Repository Pattern. In this comprehensive guide, we&rsquo;ll embark on a journey to understand the Repository Pattern from the ground up, exploring its purpose, the problems it elegantly resolves, and how to employ it in a C# .NET Core Web API powered by Entity Framework Core 6.0. We&rsquo;ll also look into its application in the context of microservices and modular monolithic architectures, elucidate the when and why of using this pattern, and provide best practices and recommendations.</p><h1 id=unraveling-the-repository-pattern>Unraveling the Repository Pattern</h1><h2 id=what-is-the-repository-pattern>What is the Repository Pattern?</h2><p>The Repository Pattern is a structural design pattern that serves as a bridge between your application and the data source, abstracting the details of data access. It provides a clean, consistent API for interacting with data, separating the data access logic from the rest of the application.</p><h2 id=the-rationale>The Rationale</h2><p>The primary rationale behind the Repository Pattern is to achieve a clean separation of concerns. By isolating data access logic, it enhances the maintainability, testability, and scalability of your application. This abstraction simplifies data retrieval and manipulation, allowing developers to work with data without needing to understand the intricacies of data storage.</p><h2 id=problems-it-resolves>Problems it Resolves</h2><p>The Repository Pattern elegantly resolves several common challenges in software development:</p><ul><li><p><strong>Code Duplication</strong>: Without a repository, data access code is often duplicated throughout the application, leading to maintenance nightmares.</p></li><li><p><strong>Testability</strong>: Direct database interaction can be challenging to unit test. The Repository Pattern simplifies testing by providing an abstraction that can be easily mocked.</p></li><li><p><strong>Flexibility</strong>: It enables you to switch data storage mechanisms without rewriting large portions of your application. For example, you can transition from SQL to NoSQL databases with minimal impact.</p></li></ul><h1 id=using-the-repository-pattern-in-practice>Using the Repository Pattern in Practice</h1><p>Let&rsquo;s see how the Repository Pattern can be employed in a C# .NET Core Web API with Entity Framework Core 6.0.</p><h2 id=repository-pattern-example>Repository Pattern Example</h2><p>Define the repository interface and its concrete implementation for an entity, such as Product:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IRepository</span>&lt;T&gt; <span style=color:#66d9ef>where</span> T : <span style=color:#66d9ef>class</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Task&lt;T&gt; GetByIdAsync(<span style=color:#66d9ef>int</span> id);
</span></span><span style=display:flex><span>    Task&lt;IEnumerable&lt;T&gt;&gt; GetAllAsync();
</span></span><span style=display:flex><span>    Task AddAsync(T entity);
</span></span><span style=display:flex><span>    Task UpdateAsync(T entity);
</span></span><span style=display:flex><span>    Task DeleteAsync(<span style=color:#66d9ef>int</span> id);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductRepository</span> : IRepository&lt;Product&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> DbContext _context;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ProductRepository(DbContext context)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _context = context;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Implement IRepository methods</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=usage-in-a-controller>Usage in a Controller</h2><p>In your API controller, inject the repository and use it like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#a6e22e>[ApiController]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>[Route(&#34;api/products&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductController</span> : ControllerBase
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> IRepository&lt;Product&gt; _productRepository;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ProductController(IRepository&lt;Product&gt; productRepository)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _productRepository = productRepository;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Implement your API endpoints using _productRepository</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=advantages-and-disadvantages>Advantages and Disadvantages</h1><h2 id=advantages>Advantages</h2><ul><li><p><strong>Separation of Concerns</strong>: The Repository Pattern decouples data access logic from business logic, enhancing maintainability and testability.</p></li><li><p><strong>Abstraction</strong>: Developers work with a unified, abstracted API, making it simpler to switch data sources or update data access logic.</p></li><li><p><strong>Code Reusability</strong>: Data access logic is encapsulated within the repository, promoting code reuse.</p></li></ul><h2 id=disadvantages>Disadvantages</h2><ul><li><p><strong>Complexity</strong>: In simple applications, the Repository Pattern might introduce unnecessary complexity.</p></li><li><p><strong>Learning Curve</strong>: Developers must be familiar with the pattern, which could</p></li><li><p><strong>Performance Overheads</strong>: The pattern may introduce slight performance overhead due to the abstraction layer.</p></li></ul><h1 id=when-and-where-to-use-the-repository-pattern>When and Where to Use the Repository Pattern</h1><h2 id=use-casesscenarios>Use Cases/Scenarios:</h2><ul><li><p><strong>Large Applications</strong>: In larger applications, where data access logic can become complex and scattered, the Repository Pattern helps maintain a clean and organized codebase.</p></li><li><p><strong>Multiple Data Sources</strong>: When dealing with multiple data sources or planning to switch data storage mechanisms, the Repository Pattern ensures flexibility and consistency.</p></li><li><p><strong>Unit Testing</strong>: If you value unit testing and want to easily mock data access, the Repository Pattern is a valuable tool.</p></li></ul><h1 id=best-practices>Best Practices</h1><ul><li><p><strong>Assess Application Size</strong>: Consider the size and complexity of your application. For smaller applications, the Repository Pattern might introduce unnecessary complexity.</p></li><li><p><strong>Dependency Injection</strong>: Utilize dependency injection to inject repositories into your controllers, promoting loose coupling and testability.</p></li><li><p><strong>Testing</strong>: Write unit tests for your repositories to ensure they work as expected.</p></li><li><p><strong>Error Handling</strong>: Implement proper error handling and exception management to provide meaningful feedback to API consumers.</p></li><li><p><strong>Async Operations</strong>: Whenever possible, use asynchronous methods for data access to improve scalability and responsiveness.</p></li><li><p><strong>Documentation</strong>: Document your code and API endpoints to assist other developers working with your API.</p></li></ul><h1 id=conclusion>Conclusion</h1><p>The Repository Pattern is a powerful tool for structuring data access logic in a C# .NET Core Web API. It resolves issues related to maintainability, testability, and data consistency while providing a unified API for data access. However, it should be applied thoughtfully, considering the specific needs of your application.</p><p>For further insights and examples, see <a href=https://docs.microsoft.com/en-us/ef/core/dbcontext-configuration/#repository-pattern target=_blank>Repository Pattern</a>.</p><p>With the Repository Pattern in your arsenal, you&rsquo;re well-equipped to build clean, efficient, and maintainable web APIs in C# .NET Core. Happy coding!</p><hr><div class=footer><p>This is a post in the <b><a href=https://gosang.github.io/series/design-patterns>Design Patterns</a></b> series.<br>Other posts in this series:<ul class=series><li>July 10, 2023 -
<a href=/posts/design-patterns/microservices/applying-outbox-pattern/>Applying the Outbox Design Pattern</a></li><li>June 22, 2023 -
<a href=/posts/design-patterns/object-oriented/grasp/>General Responsibility Assignment Software Patterns (GRASP)</a></li><li>April 30, 2023 -
<a href=/posts/design-patterns/microservices/outbox-pattern/>Outbox Pattern</a></li><li>April 9, 2023 -
<a href=/posts/design-patterns/microservices/strangler-pattern/>Strangler Pattern</a></li><li>March 18, 2023 -
<a href=/posts/design-patterns/event-sourcing-pattern/>Event Sourcing Design Pattern</a></li><li>March 1, 2023 -
<a href=/posts/design-patterns/command-query-responsibility-segregation/>Command Query Responsibility Segregation (CQRS)</a></li><li>February 12, 2022 -
<a href=/posts/design-patterns/repository-unit-of-work/>Repository Unit of Work</a></li><li>January 29, 2022 -
Repository Pattern</li><li>October 30, 2021 -
<a href=/posts/design-patterns/microservices/saga-patterns/>Saga Patterns</a></li><li>September 9, 2021 -
<a href=/posts/design-patterns/microservices/publishsubscribe-pattern/>Publish–subscribe Pattern</a></li><li>January 23, 2021 -
<a href=/posts/design-patterns/null-object-pattern/>Null Object Pattern</a></li></ul></p></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#what-is-the-repository-pattern>What is the Repository Pattern?</a></li><li><a href=#the-rationale>The Rationale</a></li><li><a href=#problems-it-resolves>Problems it Resolves</a></li></ul><ul><li><a href=#repository-pattern-example>Repository Pattern Example</a></li><li><a href=#usage-in-a-controller>Usage in a Controller</a></li></ul><ul><li><a href=#advantages>Advantages</a></li><li><a href=#disadvantages>Disadvantages</a></li></ul><ul><li><a href=#use-casesscenarios>Use Cases/Scenarios:</a></li></ul></nav></div></div></div></body></html>