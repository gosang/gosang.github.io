<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><script defer language=javascript type=text/javascript src=/js/bundle.min.aaddf69428b38a6431e3b84a00ae39ccc4f159833076ec8e133fc58eafca6b8e.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><title itemprop=name>Go Sang - Composite Pattern</title>
<meta property="og:title" content="Go Sang - Composite Pattern"><meta name=twitter:title content="Go Sang - Composite Pattern"><meta itemprop=name content="Go Sang - Composite Pattern"><meta name=application-name content="Go Sang - Composite Pattern"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><base href=https://gosang.github.io/posts/design-patterns/structural/composite-pattern/><link rel=canonical href=https://gosang.github.io/posts/design-patterns/structural/composite-pattern/ itemprop=url><meta name=url content="https://gosang.github.io/posts/design-patterns/structural/composite-pattern/"><meta name=twitter:url content="https://gosang.github.io/posts/design-patterns/structural/composite-pattern/"><meta property="og:url" content="https://gosang.github.io/posts/design-patterns/structural/composite-pattern/"><meta property="og:updated_time" content="6010-06-12T1056:42:21Z"><link rel=sitemap type=application/xml title=Sitemap href=https://gosang.github.io/sitemap.xml><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><meta name=twitter:site content><meta name=twitter:creator content><meta property="fb:admins" content><meta name=apple-mobile-web-app-title content><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta property="og:type" content="article"><meta property="article:publisher" content><meta property="og:article:published_time" content="6010-06-12T1056:42:21Z"><meta property="article:published_time" content="6010-06-12T1056:42:21Z"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Composite Pattern","author":{"@type":"Person","name":"https:\/\/github.com\/gosang"},"datePublished":"2021-10-06","description":"","wordCount":"625","mainEntityOfPage":"True","dateModified":"2021-10-06","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"","logo":{"@type":"imageObject","url":""}}}</script><meta name=generator content="Hugo 0.121.1"><link type=text/css rel=stylesheet href=/css/bundle.min.178e339ccb9acabffeebf9adbb0bb23c1ec0b72a2a50edee18a5007d4d5a68aa.css><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5a5a5a;--link-color:#268bd2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#bf616a;--code-background-color:#E5E5E5;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#eee;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9d9d9d;--link-color:#268bd2;--date-color:#9a9a9a;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#ff7f7f;--code-background-color:#393D47}body{background-color:var(--bkg-color)}</style></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://gosang.github.io/><h1>Go Sang</h1></a></h1><p class=lead>Learning about technology.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/posts/>Posts</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=https://gosang.github.io/posts/design-patterns/caching/difference-between-imemorycache-and-redis/>Difference Between Imemorycache and Redis</a></li><li class=bullet><a href=https://gosang.github.io/posts/design-patterns/caching/caching-pattern/>Caching Pattern</a></li><li class=bullet><a href=https://gosang.github.io/posts/design-patterns/microservices/applying-outbox-pattern/>Applying the Outbox Design Pattern</a></li><li class=bullet><a href=https://gosang.github.io/posts/ai/llm/>Large Language Models (LLMs)</a></li><li class=bullet><a href=https://gosang.github.io/posts/design-architectures/modular-monolith-architecture/>Modular Monolith Architecture</a></li></ul></nav><a target=_blank class=social title=GitHub href=https://github.com/gosang><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a target=_blank class=social title="RSS Feed" href=https://gosang.github.io//posts/index.xml><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote>powered by <a target=_blank href=https://gohugo.io>Hugo</a> | themed with <a target=_blank href=https://github.com/lukeorth/poison>poison</a><br>&copy; 2023 . All rights reserved.</p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://gosang.github.io/posts/design-patterns/structural/composite-pattern/>Composite Pattern</a></h1><time datetime=2021-10-06T12:56:42Z class=post-date>October 6, 2021</time><ul class=tags><li class="tag-Design Patterns"><a href=https://gosang.github.io/tags/design-patterns>Design Patterns</a></li><li class=tag-Composite><a href=https://gosang.github.io/tags/composite>Composite</a></li></ul><p class=seriesname>Series: <a href=https://gosang.github.io/series/structural-design-patterns>Structural Design Patterns</a></p></div><p>The Composite Pattern is a structural design pattern that allows you to compose objects into tree structures to represent part-whole hierarchies. This pattern lets clients treat individual objects and compositions of objects uniformly. In simpler terms, it enables you to work with both individual objects and groups of objects in a unified manner.</p><h1 id=rationale-behind-the-composite-pattern>Rationale behind the Composite Pattern</h1><p>The primary goal of the Composite Pattern is to treat individual objects and compositions of objects uniformly. This is achieved by defining a common interface for both leaf nodes (individual objects) and composite nodes (collections of objects). Clients can then operate on these elements without needing to distinguish between them.</p><h1 id=problems-addressed-by-the-composite-pattern>Problems Addressed by the Composite Pattern</h1><ul><li><p><strong>Simplified Client Code</strong>: Without the Composite Pattern, client code dealing with complex hierarchies becomes convoluted as it needs to handle individual objects and their compositions differently. The Composite Pattern simplifies this by offering a uniform interface.</p></li><li><p><strong>Scalability</strong>: As your system grows, managing complex object structures becomes challenging. The Composite Pattern provides a scalable solution by allowing you to treat both leaf and composite nodes uniformly.</p></li></ul><h1 id=how-the-composite-pattern-works>How the Composite Pattern Works</h1><h2 id=interface-definition>Interface Definition</h2><p>Let&rsquo;s start with an example in the context of an e-commerce system using C# .NET Core. Suppose we have a product hierarchy with both individual products and product categories:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IComponent</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> DisplayInfo();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Product</span> : IComponent
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> <span style=color:#66d9ef>string</span> _name;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Product(<span style=color:#66d9ef>string</span> name)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _name = name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> DisplayInfo()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        Console.WriteLine(<span style=color:#e6db74>$&#34;Product: {_name}&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductCategory</span> : IComponent
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> List&lt;IComponent&gt; _children = <span style=color:#66d9ef>new</span> List&lt;IComponent&gt;();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> <span style=color:#66d9ef>string</span> _name;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ProductCategory(<span style=color:#66d9ef>string</span> name)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _name = name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Add(IComponent component)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _children.Add(component);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> DisplayInfo()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        Console.WriteLine(<span style=color:#e6db74>$&#34;Category: {_name}&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>var</span> child <span style=color:#66d9ef>in</span> _children)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            child.DisplayInfo();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=using-the-composite-pattern>Using the Composite Pattern</h2><p>Now, let&rsquo;s demonstrate how to use the Composite Pattern in the context of an e-commerce system:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Program</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> Main()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> laptop = <span style=color:#66d9ef>new</span> Product(<span style=color:#e6db74>&#34;Laptop&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> smartphone = <span style=color:#66d9ef>new</span> Product(<span style=color:#e6db74>&#34;Smartphone&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> electronicsCategory = <span style=color:#66d9ef>new</span> ProductCategory(<span style=color:#e6db74>&#34;Electronics&#34;</span>);
</span></span><span style=display:flex><span>        electronicsCategory.Add(laptop);
</span></span><span style=display:flex><span>        electronicsCategory.Add(smartphone);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> clothing = <span style=color:#66d9ef>new</span> Product(<span style=color:#e6db74>&#34;Shirt&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> shoes = <span style=color:#66d9ef>new</span> Product(<span style=color:#e6db74>&#34;Running Shoes&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> apparelCategory = <span style=color:#66d9ef>new</span> ProductCategory(<span style=color:#e6db74>&#34;Apparel&#34;</span>);
</span></span><span style=display:flex><span>        apparelCategory.Add(clothing);
</span></span><span style=display:flex><span>        apparelCategory.Add(shoes);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> rootCategory = <span style=color:#66d9ef>new</span> ProductCategory(<span style=color:#e6db74>&#34;Root&#34;</span>);
</span></span><span style=display:flex><span>        rootCategory.Add(electronicsCategory);
</span></span><span style=display:flex><span>        rootCategory.Add(apparelCategory);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        rootCategory.DisplayInfo();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The output of this code will display the entire product hierarchy, treating both individual products and product categories uniformly.</p><h1 id=advantages-and-disadvantages>Advantages and Disadvantages</h1><h2 id=advantages-of-the-composite-pattern>Advantages of the Composite Pattern</h2><ul><li><strong>Uniformity</strong>: Treats individual objects and compositions uniformly, simplifying client code.</li><li><strong>Scalability</strong>: Easily scales to accommodate new types of objects in the hierarchy.</li><li><strong>Flexibility</strong>: Clients can work with both simple and complex structures seamlessly.</li></ul><h2 id=disadvantages-of-the-composite-pattern>Disadvantages of the Composite Pattern</h2><ul><li><p><strong>Complexity</strong>: Introducing the Composite Pattern may overcomplicate the code if the hierarchy is simple and unlikely to change.</p></li><li><p><strong>Runtime Overhead</strong>: There can be a slight performance overhead due to the recursive nature of operations on the composite structure.</p></li></ul><h1 id=when-to-use-the-composite-pattern>When to Use the Composite Pattern</h1><p>Use the Composite Pattern when:</p><ul><li>You have a hierarchical structure of objects.</li><li>You want clients to treat individual objects and compositions of objects uniformly.</li><li>You need to represent part-whole hierarchies.</li></ul><h1 id=best-practices>Best Practices</h1><ul><li><p><strong>Use Abstraction</strong>: Define a common interface for both leaf and composite nodes to ensure a consistent API.</p></li><li><p><strong>Recursive Traversal</strong>: Implement a recursive traversal mechanism for handling complex hierarchies.</p></li><li><p><strong>Careful Design</strong>: Assess the complexity of your hierarchy before adopting the Composite Pattern to avoid unnecessary overhead.</p></li></ul><h1 id=conclusion>Conclusion</h1><p>The Composite Pattern is a powerful tool for managing hierarchies in a unified manner. By providing a common interface for both individual objects and compositions, it simplifies client code, enhances scalability, and offers flexibility. However, its application should be considered judiciously, keeping in mind the structure and dynamics of your system.</p><h1 id=references>References:</h1><ul><li>Gamma, E., Helm, R., Johnson, R., & Vlissides, J. (1994). Design Patterns: Elements of Reusable Object-Oriented Software. Addison-Wesley.</li></ul><hr><div class=footer><p>This is a post in the <b><a href=https://gosang.github.io/series/structural-design-patterns>Structural Design Patterns</a></b> series.<br>Other posts in this series:<ul class=series><li>July 17, 2022 -
<a href=/posts/design-patterns/structural/bridge-pattern/>Bridge Pattern</a></li><li>April 5, 2022 -
<a href=/posts/design-patterns/structural/flyweight-pattern/>Flyweight Pattern</a></li><li>March 15, 2022 -
<a href=/posts/design-patterns/structural/proxy-pattern/>Proxy Pattern</a></li><li>February 22, 2022 -
<a href=/posts/design-patterns/structural/adapter-pattern/>Adapter Pattern</a></li><li>January 20, 2022 -
<a href=/posts/design-patterns/structural/facade-pattern/>Facade Pattern</a></li><li>October 6, 2021 -
Composite Pattern</li><li>August 28, 2021 -
<a href=/posts/design-patterns/structural/decorator-pattern/>Decorator Pattern</a></li><li>August 23, 2021 -
<a href=/posts/design-patterns/structural/interpreter-pattern/>Interpreter Pattern</a></li></ul></p></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#interface-definition>Interface Definition</a></li><li><a href=#using-the-composite-pattern>Using the Composite Pattern</a></li></ul><ul><li><a href=#advantages-of-the-composite-pattern>Advantages of the Composite Pattern</a></li><li><a href=#disadvantages-of-the-composite-pattern>Disadvantages of the Composite Pattern</a></li></ul></nav></div></div></div></body></html>