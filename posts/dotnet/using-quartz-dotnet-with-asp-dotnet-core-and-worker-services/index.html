<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><script defer language=javascript type=text/javascript src=/js/bundle.min.11d62625e7495f8147fccf5d08f37bded574a50c4508c235cc666848567d99ab.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><title itemprop=name>Go Sang - Using Quartz.NET with ASP.NET Core and Worker Services</title><meta property="og:title" content="Go Sang - Using Quartz.NET with ASP.NET Core and Worker Services"><meta name=twitter:title content="Go Sang - Using Quartz.NET with ASP.NET Core and Worker Services"><meta itemprop=name content="Go Sang - Using Quartz.NET with ASP.NET Core and Worker Services"><meta name=application-name content="Go Sang - Using Quartz.NET with ASP.NET Core and Worker Services"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><base href=https://gosang.github.io/posts/dotnet/using-quartz-dotnet-with-asp-dotnet-core-and-worker-services/><link rel=canonical href=https://gosang.github.io/posts/dotnet/using-quartz-dotnet-with-asp-dotnet-core-and-worker-services/ itemprop=url><meta name=url content="https://gosang.github.io/posts/dotnet/using-quartz-dotnet-with-asp-dotnet-core-and-worker-services/"><meta name=twitter:url content="https://gosang.github.io/posts/dotnet/using-quartz-dotnet-with-asp-dotnet-core-and-worker-services/"><meta property="og:url" content="https://gosang.github.io/posts/dotnet/using-quartz-dotnet-with-asp-dotnet-core-and-worker-services/"><meta property="og:updated_time" content="6007-06-12T76:52:24+0100"><link rel=sitemap type=application/xml title=Sitemap href=https://gosang.github.io/sitemap.xml><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><meta name=twitter:site content><meta name=twitter:creator content><meta property="fb:admins" content><meta name=apple-mobile-web-app-title content><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta property="og:type" content="article"><meta property="article:publisher" content><meta property="og:article:published_time" content="6007-06-12T76:52:24+0100"><meta property="article:published_time" content="6007-06-12T76:52:24+0100"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Using Quartz.NET with ASP.NET Core and Worker Services","author":{"@type":"Person","name":"https:\/\/github.com\/gosang"},"datePublished":"2024-07-06","description":"","wordCount":"1003","mainEntityOfPage":"True","dateModified":"2024-07-06","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"","logo":{"@type":"imageObject","url":""}}}</script><meta name=generator content="Hugo 0.119.0"><link type=text/css rel=stylesheet href=/css/bundle.min.178e339ccb9acabffeebf9adbb0bb23c1ec0b72a2a50edee18a5007d4d5a68aa.css><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5a5a5a;--link-color:#268bd2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#bf616a;--code-background-color:#E5E5E5;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#eee;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9d9d9d;--link-color:#268bd2;--date-color:#9a9a9a;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#ff7f7f;--code-background-color:#393D47}body{background-color:var(--bkg-color)}</style></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://gosang.github.io/><h1>Go Sang</h1></a></h1><p class=lead>Learning about technology.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/posts/>Posts</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=https://gosang.github.io/posts/react/implementing-cookie-based-stateless-sessions-in-next-js-using-server-actions/>Implementing Cookie-Based Stateless Sessions in Next.js Using Server Actions</a></li><li class=bullet><a href=https://gosang.github.io/posts/dotnet/sending-email-in-asp-dotnet-core-with-microsoft-graph/>Sending Email in ASP.NET Core With Microsoft Graph</a></li><li class=bullet><a href=https://gosang.github.io/posts/devops/kubernetes/using-multiple-namespaces-in-kubernetes/>Using Multiple Namespaces in Kubernetes</a></li><li class=bullet><a href=https://gosang.github.io/posts/react/simplifying-the-nextjs-server-actions/>Simplifying the Next.js Server Actions</a></li><li class=bullet><a href=https://gosang.github.io/posts/dotnet/result-pattern-in-asp-dotnet-core/>Result Pattern in ASP.NET Core</a></li></ul></nav><a target=_blank class=social title=GitHub href=https://github.com/gosang><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a target=_blank class=social title="RSS Feed" href=https://gosang.github.io//posts/index.xml><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote>powered by <a target=_blank href=https://gohugo.io>Hugo</a> | themed with <a target=_blank href=https://github.com/lukeorth/poison>poison</a><br>&copy; 2024 . All rights reserved.</p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://gosang.github.io/posts/dotnet/using-quartz-dotnet-with-asp-dotnet-core-and-worker-services/>Using Quartz.NET with ASP.NET Core and Worker Services</a></h1><time datetime=2024-07-06T12:06:52+0100 class=post-date>July 6, 2024</time><ul class=tags><li class="tag-.NET Core"><a href=https://gosang.github.io/tags/.net-core>.NET Core</a></li><li class=tag-Scheduling><a href=https://gosang.github.io/tags/scheduling>Scheduling</a></li></ul></div><p>Quartz.NET is a powerful, open-source job scheduling library that can be easily integrated with ASP.NET Core and worker services. It is designed for scheduling jobs within your application, providing a robust way to manage background tasks, timed operations, and complex job workflows.</p><p>In this blog, we will explore the fundamentals of Quartz.NET, its integration with ASP.NET Core and worker services, and provide a detailed example using .NET Core 8. We will also discuss the advantages, disadvantages, best practices, and considerations for using Quartz.NET in your projects.</p><h1 id=what-is-quartznet>What is Quartz.NET?</h1><p>Quartz.NET is a full-featured, open-source job scheduling system that can be used to create simple or complex schedules for executing various jobs. It supports many different types of job scheduling, including daily, weekly, monthly, and cron-based schedules.</p><h2 id=why-quartznet>Why Quartz.Net?</h2><p>The main purpose of Quartz.NET is to provide a flexible and reliable way to manage background tasks. It is particularly useful for:</p><ul><li>Running recurring tasks, such as sending email notifications, cleaning up databases, or processing data.</li><li>Scheduling tasks to run at specific times or intervals.</li><li>Handling complex job workflows and dependencies.</li></ul><h2 id=main-concepts>Main Concepts</h2><ul><li><strong>Job</strong>: A job is the task that you want to execute. In Quartz.NET, a job is defined by implementing the IJob interface.</li><li><strong>Trigger</strong>: A trigger defines the schedule for executing a job. Quartz.NET supports various types of triggers, including simple triggers, cron triggers, and calendar interval triggers.</li><li><strong>Scheduler</strong>: The scheduler is responsible for managing the execution of jobs. It maintains the job and trigger definitions and executes jobs when their triggers fire.</li><li><strong>Job Store</strong>: This is where the job and trigger definitions are stored. Quartz.NET supports both in-memory and persistent job stores.</li></ul><h1 id=integrating-quartznet-with-aspnet-core-and-worker-services>Integrating Quartz.NET with ASP.NET Core and Worker Services</h1><p>Let&rsquo;s walk through the process of integrating Quartz.NET with ASP.NET Core and worker services using a sample .NET Core 8 project.</p><h2 id=setting-up-the-project>Setting Up the Project</h2><ol><li>Create a new ASP.NET Core project:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dotnet new webapi -n QuartzDemo
</span></span><span style=display:flex><span>cd QuartzDemo
</span></span></code></pre></div><ol start=2><li>Add the Quartz.NET NuGet package:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dotnet add package Quartz
</span></span><span style=display:flex><span>dotnet add package Quartz.Extensions.Hosting
</span></span></code></pre></div><h2 id=configuring-quartznet>Configuring Quartz.NET</h2><p>In the <code>Program.cs</code> file, configure Quartz.NET to work with ASP.NET Core.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> Microsoft.AspNetCore.Builder;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Microsoft.Extensions.DependencyInjection;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz.Spi;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz.Impl;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz.Simpl;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> QuartzDemo.Jobs;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> builder = WebApplication.CreateBuilder(args);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Add Quartz services</span>
</span></span><span style=display:flex><span>builder.Services.AddQuartz(q =&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    q.UseMicrosoftDependencyInjectionJobFactory();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Add a job</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> jobKey = <span style=color:#66d9ef>new</span> JobKey(<span style=color:#e6db74>&#34;ExampleJob&#34;</span>);
</span></span><span style=display:flex><span>    q.AddJob&lt;ExampleJob&gt;(opts =&gt; opts.WithIdentity(jobKey));
</span></span><span style=display:flex><span>    q.AddTrigger(opts =&gt; opts
</span></span><span style=display:flex><span>        .ForJob(jobKey)
</span></span><span style=display:flex><span>        .WithIdentity(<span style=color:#e6db74>&#34;ExampleJob-trigger&#34;</span>)
</span></span><span style=display:flex><span>        .WithCronSchedule(<span style=color:#e6db74>&#34;0/30 * * * * ?&#34;</span>)); <span style=color:#75715e>// Every 30 seconds</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>builder.Services.AddQuartzHostedService(q =&gt; q.WaitForJobsToComplete = <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Add other services</span>
</span></span><span style=display:flex><span>builder.Services.AddControllers();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> app = builder.Build();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Configure the HTTP request pipeline</span>
</span></span><span style=display:flex><span>app.UseAuthorization();
</span></span><span style=display:flex><span>app.MapControllers();
</span></span><span style=display:flex><span>app.Run();
</span></span></code></pre></div><h2 id=creating-a-job>Creating a Job</h2><p>Create a folder named <code>Jobs</code> and add a new job class, <code>ExampleJob.cs</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> System;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> System.Threading.Tasks;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> QuartzDemo.Jobs
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleJob</span> : IJob
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> Task Execute(IJobExecutionContext context)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            Console.WriteLine(<span style=color:#e6db74>&#34;ExampleJob is executing at &#34;</span> + DateTime.Now);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Task.CompletedTask;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=adding-worker-services>Adding Worker Services</h2><p>Worker services can be integrated similarly to how we set up Quartz.NET in the <code>Program.cs</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> Microsoft.Extensions.Hosting;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz.Spi;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz.Impl;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Quartz.Simpl;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> QuartzDemo.Jobs;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> builder = WebApplication.CreateBuilder(args);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Add Quartz services</span>
</span></span><span style=display:flex><span>builder.Services.AddQuartz(q =&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    q.UseMicrosoftDependencyInjectionJobFactory();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Add a job</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> jobKey = <span style=color:#66d9ef>new</span> JobKey(<span style=color:#e6db74>&#34;ExampleJob&#34;</span>);
</span></span><span style=display:flex><span>    q.AddJob&lt;ExampleJob&gt;(opts =&gt; opts.WithIdentity(jobKey));
</span></span><span style=display:flex><span>    q.AddTrigger(opts =&gt; opts
</span></span><span style=display:flex><span>        .ForJob(jobKey)
</span></span><span style=display:flex><span>        .WithIdentity(<span style=color:#e6db74>&#34;ExampleJob-trigger&#34;</span>)
</span></span><span style=display:flex><span>        .WithCronSchedule(<span style=color:#e6db74>&#34;0/30 * * * * ?&#34;</span>)); <span style=color:#75715e>// Every 30 seconds</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>builder.Services.AddQuartzHostedService(q =&gt; q.WaitForJobsToComplete = <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Add worker service</span>
</span></span><span style=display:flex><span>builder.Services.AddHostedService&lt;Worker&gt;();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> app = builder.Build();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Configure the HTTP request pipeline</span>
</span></span><span style=display:flex><span>app.UseAuthorization();
</span></span><span style=display:flex><span>app.MapControllers();
</span></span><span style=display:flex><span>app.Run();
</span></span></code></pre></div><h2 id=create-the-workercs-class>Create the Worker.cs class:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> Microsoft.Extensions.Hosting;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> System;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> System.Threading;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> System.Threading.Tasks;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> QuartzDemo
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Worker</span> : BackgroundService
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>async</span> Task ExecuteAsync(CancellationToken stoppingToken)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> (!stoppingToken.IsCancellationRequested)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                Console.WriteLine(<span style=color:#e6db74>&#34;Worker running at: {time}&#34;</span>, DateTimeOffset.Now);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>await</span> Task.Delay(<span style=color:#ae81ff>1000</span>, stoppingToken);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We now have covered: how to set up a project with Quartz.NET, configure it, create a job, add worker services, and create the Worker.cs class in an ASP.NET Core application. This setup allows for flexible and reliable job scheduling and background processing in an application.</p><h1 id=advantages>Advantages</h1><ul><li><strong>Flexibility</strong>: Supports various types of job schedules and triggers.</li><li><strong>Scalability</strong>: Can handle many jobs and triggers efficiently.</li><li><strong>Reliability</strong>: Ensures jobs are executed reliably, even in case of failures.</li><li><strong>Integration</strong>: Easily integrates with ASP.NET Core and other .NET services.</li></ul><h1 id=disadvantages>Disadvantages</h1><ul><li><strong>Complexity</strong>: Can be complex to configure for advanced scenarios.</li><li><strong>Overhead</strong>: May add overhead to your application, especially with persistent job stores.</li><li><strong>Learning Curve</strong>: Requires understanding of job scheduling concepts and Quartz.NET APIs.</li></ul><h1 id=when-to-use-and-when-not-to-use-quartznet>When to Use and When Not to Use Quartz.NET</h1><h2 id=when-to-use>When to Use</h2><ul><li><strong>Recurring Background Tasks</strong>: Ideal for tasks that need to run at specific intervals or times.</li><li><strong>Complex Scheduling</strong>: Suitable for applications that require complex job scheduling and dependencies.</li><li><strong>Job Reliability</strong>: When you need reliable execution of background jobs.</li></ul><h2 id=when-not-to-use>When Not to Use</h2><ul><li><strong>Simple Tasks</strong>: For simple background tasks, consider using IHostedService or BackgroundService in ASP.NET Core.</li><li><strong>Real-Time Processing</strong>: If real-time processing is required, Quartz.NET might introduce unnecessary delays.</li><li><strong>High-Throughput Systems</strong>: If your application needs to handle very high throughput, the overhead of Quartz.NET might be a concern.</li></ul><h1 id=issues-considerations-and-best-practices>Issues, Considerations, and Best Practices</h1><h2 id=issues-and-considerations>Issues and Considerations</h2><p>-** Job Execution Time**: Long-running jobs can block threads. Consider using asynchronous jobs.</p><ul><li><strong>Resource Management</strong>: Properly manage resources to avoid memory leaks and performance issues.</li><li><strong>Persistence</strong>: Choose the right job store based on your requirements (in-memory vs. persistent).</li><li><strong>Error Handling</strong>: Implement robust error handling and retry mechanisms.</li></ul><h2 id=best-practices>Best Practices</h2><ul><li><strong>Use Dependency Injection</strong>: Utilize DI for job dependencies to keep your code clean and maintainable.</li><li><strong>Monitor and Log</strong>: Implement monitoring and logging for your jobs to track their execution and troubleshoot issues.</li><li><strong>Optimize Job Scheduling</strong>: Carefully design your job schedules to avoid conflicts and ensure efficient execution.</li><li><strong>Test Thoroughly</strong>: Test your job schedules and triggers thoroughly to ensure they work as expected.</li></ul><h1 id=conclusion>Conclusion</h1><p>Quartz.NET is a versatile and powerful library for job scheduling in .NET applications. When integrated with ASP.NET Core and worker services, it provides a robust solution for managing background tasks. By following best practices and considering the specific needs of your application, you can effectively utilize Quartz.NET to enhance your application&rsquo;s functionality.</p><p>For more information and detailed documentation, visit the <a href=https://www.quartz-scheduler.net/documentation/ target=_blank>Quartz.NET documentation</a>.</p><hr><div class=footer><a class=previous-post href="https://gosang.github.io/posts/security/simplifying-oauth-openid-and-jwt/?ref=footer"><span style=font-weight:700>« Previous</span><br>Simplifying the OAuth, OpenID, and JWT</a><div class=next-post><a href="https://gosang.github.io/posts/istio/simplifying-oauth-2-in-istio-proxy-sidecar-and-envoy-filter/?ref=footer"><span style=font-weight:700>Next »</span><br>Simplifying OAuth 2 in Istio Proxy, Sidecar and...</a></div></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#why-quartznet>Why Quartz.Net?</a></li><li><a href=#main-concepts>Main Concepts</a></li></ul><ul><li><a href=#setting-up-the-project>Setting Up the Project</a></li><li><a href=#configuring-quartznet>Configuring Quartz.NET</a></li><li><a href=#creating-a-job>Creating a Job</a></li><li><a href=#adding-worker-services>Adding Worker Services</a></li><li><a href=#create-the-workercs-class>Create the Worker.cs class:</a></li></ul><ul><li><a href=#when-to-use>When to Use</a></li><li><a href=#when-not-to-use>When Not to Use</a></li></ul><ul><li><a href=#issues-and-considerations>Issues and Considerations</a></li><li><a href=#best-practices>Best Practices</a></li></ul></nav></div></div></div></body></html>